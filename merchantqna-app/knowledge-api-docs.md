# Knowledge 接口文档

## 接口概述

本文档描述了知识文档管理系统的API接口，包括知识文档的创建、查询、更新等功能。系统支持通过标签筛选文档列表、获取文档详情，以及编辑文档的基本信息和内容。

## 接口详情

### 1. 获取知识文档列表

**API路径**: `GET /api/knowledge/list`

**功能描述**: 通过一级标签和二级标签获取知识文档列表，不包含文档内容。

**请求参数**:
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| primaryTag | String | 否 | 一级标签 |
| secondaryTag | String | 否 | 二级标签 |

**响应格式**:
```json
{
  "status": "success",
  "data": {
    "knowledgeList": [
      {
        "id": "1",
        "title": "文档标题",
        "primaryTag": "一级标签",
        "secondaryTag": "二级标签",
        "status": "生效中",
        "publishTime": "2023-01-01T00:00:00.000Z",
        "createdAt": "2023-01-01T00:00:00.000Z",
        "updatedAt": "2023-01-01T00:00:00.000Z"
      }
    ],
    "total": 1
  }
}
```

**错误处理**:
- 500: 服务器内部错误

### 2. 获取知识文档详情

**API路径**: `GET /api/knowledge/{id}`

**功能描述**: 通过ID获取知识文档的完整信息，包括内容。

**请求参数**:
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| id | String | 是 | 知识文档ID |

**响应格式**:
```json
{
  "status": "success",
  "data": {
    "knowledge": {
      "id": "1",
      "title": "文档标题",
      "primaryTag": "一级标签",
      "secondaryTag": "二级标签",
      "content": "文档内容...",
      "status": "生效中",
      "publishTime": "2023-01-01T00:00:00.000Z",
      "createdAt": "2023-01-01T00:00:00.000Z",
      "updatedAt": "2023-01-01T00:00:00.000Z"
    }
  }
}
```

**错误处理**:
- 400: 文档ID是必填的
- 404: 知识文档不存在
- 500: 服务器内部错误

### 3. 创建知识文档

**API路径**: `POST /api/knowledge`

**功能描述**: 创建新的知识文档，初始状态为"未完成"，无内容。

**权限要求**: 需要认证（Bearer Token）

**请求体**:
```json
{
  "title": "文档标题",
  "primaryTag": "一级标签",
  "secondaryTag": "二级标签"
}
```

**响应格式**:
```json
{
  "status": "success",
  "message": "知识文档创建成功",
  "data": {
    "id": "1"
  }
}
```

**错误处理**:
- 400: 标题、一级标签和二级标签都是必填的
- 500: 服务器内部错误

### 4. 更新知识文档基本信息

**API路径**: `PUT /api/knowledge/basic-info/{id}`

**功能描述**: 更新知识文档的标题、一级标签、二级标签和状态。

**权限要求**: 需要认证（Bearer Token）

**请求参数**:
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| id | String | 是 | 知识文档ID |

**请求体**:
```json
{
  "title": "新文档标题",
  "primaryTag": "新一级标签",
  "secondaryTag": "新二级标签",
  "status": "生效中" // 可选值: "生效中", "已失效", "未完成"
}
```

**响应格式**:
```json
{
  "status": "success",
  "message": "知识文档基本信息更新成功"
}
```

**错误处理**:
- 400: 文档ID是必填的 / 至少需要提供一个要更新的字段 / 无效的文档状态
- 404: 知识文档不存在
- 500: 服务器内部错误

### 5. 更新知识文档内容

**API路径**: `PUT /api/knowledge/content/{id}`

**功能描述**: 更新知识文档的内容。

**权限要求**: 需要认证（Bearer Token）

**请求参数**:
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| id | String | 是 | 知识文档ID |

**请求体**:
```json
{
  "content": "新的文档内容..."
}
```

**响应格式**:
```json
{
  "status": "success",
  "message": "知识文档内容更新成功"
}
```

**错误处理**:
- 400: 文档ID是必填的 / 内容是必填的
- 404: 知识文档不存在
- 500: 服务器内部错误

## 注意事项

1. 所有需要认证的接口需要在请求头中添加 `Authorization: Bearer {token}`
2. 创建文档时初始状态为"未完成"，可后续通过更新基本信息接口修改状态
3. 文档列表接口默认按发布时间降序排序
4. 接口响应统一使用标准格式，包含status和相应数据或消息